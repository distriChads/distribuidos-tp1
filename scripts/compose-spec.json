{
    "name": "tp1",
    "services": [
        {
            "name": "client-handler",
            "log_level": "debug",
            "replicas": 1,
            "movies_exchange_name": "data_exchange",
            "credits_exchange_name": "data_exchange",
            "ratings_exchange_name": "data_exchange",
            "results_exchange_name": "data_exchange",
            "results_exchange_routing_keys": ["*.results"],
            "listen_backlog": 5
        },
        {
            "name": "filter-argentina",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "movies",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "movies.argentina.output",
                "type": "all",
                "replicas": "filter-argentina"
            }
        },
        {
            "name": "filter-spain-2000",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "filter-argentina",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "query1.results",
                "type": "unique"
            }
        },
        {
            "name": "filter-only-one-country",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "movies",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "movies.groupby.country-sum.input",
                "type": "all",
                "replicas": "group-by-country-sum"
            }
        },
        {
            "name": "group-by-country-sum",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "filter-only-one-country",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "master.country-sum.input",
                "type": "unique"
            }
        },
        {
            "name": "master-group-by-country-sum",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "group-by-country-sum",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "master.country-sum.output",
                "type": "unique"
            }
        },
        {
            "name": "top-five-country-budget",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "master-group-by-country-sum",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "query2.results",
                "type": "unique"
            }
        },
        {
            "name": "filter-after-2000",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "filter-argentina",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "join.movies.input",
                "type": "unique"
            }
        },
        {
            "name": "join-movie-ratings",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "filter-after-2000",
                "type": "all"
            },
            "second_input": {
                "from": "ratings",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.movie-avg.input",
                "type": "all",
                "replicas": "group-by-movie-average"
            }
        },
        {
            "name": "group-by-movie-average",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "join-movie-ratings",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.movie-avg.output",
                "type": "unique"
            }
        },
        {
            "name": "master-group-by-movie-average",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "group-by-movie-average",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "topn.first-last.input",
                "type": "unique"
            }
        },
        {
            "name": "first-and-last",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "master-group-by-movie-average",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "query3.results",
                "type": "unique"
            }
        },
        {
            "name": "join-movie-credits",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "filter-after-2000",
                "type": "all"
            },
            "second_input": {
                "from": "credits",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.actor.input",
                "type": "all",
                "replicas": "group-by-actor-count"
            }
        },
        {
            "name": "group-by-actor-count",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "join-movie-credits",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.actor.output",
                "type": "unique"
            }
        },
        {
            "name": "master-group-by-actor-count",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "group-by-actor-count",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "topn.top-10-cast.input",
                "type": "unique"
            }
        },
        {
            "name": "top-ten-cast-movie",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "master-group-by-actor-count",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "query4.results",
                "type": "unique"
            }
        },
        {
            "name": "machine-learning",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "movies",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.overview.input",
                "type": "all",
                "replicas": "group-by-overview-average"
            }
        },
        {
            "name": "group-by-overview-average",
            "replicas": 3,
            "log_level": "debug",
            "input": {
                "from": "machine-learning",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "groupby.overview.output",
                "type": "unique"
            }
        },
        {
            "name": "master-group-by-overview-average",
            "replicas": 1,
            "log_level": "debug",
            "input": {
                "from": "group-by-overview-average",
                "type": "all"
            },
            "output": {
                "exchange_name": "data_exchange",
                "routing_key": "query5.results",
                "type": "unique"
            }
        }
    ]
}