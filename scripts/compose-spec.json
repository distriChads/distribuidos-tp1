{
    "name": "tp1",
    "services": [
        {
            "name": "client-handler",
            "log_level": "info",
            "replicas": 1,
            "input_routing_keys": ["*.results"],
            "output_routing_keys": ["movies.client_handler", "ratings.client-handler.router", "credits.client-handler.router"],
            "heartbeat_port": 4444,
            "listen_backlog": 5
        },
        {
            "name": "filter-argentina",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.client_handler"],
            "heartbeat_port": 4444,
            "output_routing_keys": ["movies.argentina"]
        },
        {
            "name": "filter-spain-2000",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.argentina"],
            "heartbeat_port": 4444,
            "output_routing_keys": ["query1.results"]
        },
        {
            "name": "filter-only-one-country",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.client_handler"],
            "heartbeat_port": 4444,
            "output_routing_keys": ["movies.filter_only_one_country.router"]
        },
        {
            "name": "filter-after-2000",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.argentina"],
            "heartbeat_port": 4444,
            "output_routing_keys": ["movies.after_2000"]
        },
        {
            "name": "group-by-country-sum",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["group-by-country-sum"],
            "output_routing_keys": ["movies.group_by_country_sum"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "group-by-movie-average",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["group-by-movie-average"],
            "output_routing_keys": ["movies.group_by_movie_average"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "group-by-actor-count",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["group-by-actor-count"],
            "output_routing_keys": ["movies.group_by_actor_count"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "group-by-overview-average",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["group-by-overview-average"],
            "output_routing_keys": ["movies.group_by_overview_average"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "master-group-by-country-sum",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.group_by_country_sum"],
            "output_routing_keys": ["master.country_sum"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 1
        },
        {
            "name": "master-group-by-movie-average",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.group_by_movie_average"],
            "output_routing_keys": ["master.movie_average"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 1
        },
        {
            "name": "master-group-by-actor-count",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.group_by_actor_count"],
            "output_routing_keys": ["master.actor_count"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 1
        },
        {
            "name": "master-group-by-overview-average",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.group_by_overview_average"],
            "output_routing_keys": ["query5.results"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 1
        },
        {
            "name": "machine-learning",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["movies.client_handler"],
            "heartbeat_port": 4444,
            "output_routing_keys": ["movies.ml.router"]
        },
        {
            "name": "top-five-country-budget",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["master.country_sum"],
            "output_routing_keys": ["query2.results"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "top-ten-cast-movie",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["master.actor_count"],
            "output_routing_keys": ["query4.results"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "join-movie-ratings",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["join-movie-ratings", "join-ratings"],
            "output_routing_keys": ["join_movie_ratings.router"],
            "heartbeat_port": 4444,
            "storage": ".local-storage"
        },
        {
            "name": "join-movie-credits",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["join-movie-credits", "join-credits"],
            "output_routing_keys": ["join_movie_credits.router"],
            "heartbeat_port": 4444,
            "storage": ".local-storage"
        },
        {
            "name": "first-and-last",
            "replicas": 1,
            "log_level": "info",
            "input_routing_keys": ["master.movie_average"],
            "output_routing_keys": ["query3.results"],
            "storage": ".local-storage",
            "heartbeat_port": 4444,
            "messages_per_commit": 10
        },
        {
            "name": "router",
            "replicas": 1,
            "log_level": "info",
            "heartbeat_port": 4444,
            "input_routing_keys": ["movies.after_2000", "ratings.client-handler.router", "credits.client-handler.router", "movies.filter_only_one_country.router", "movies.ml.router", "join_movie_ratings.router", "join_movie_credits.router"]
        },
        {
            "name": "health-checker",
            "replicas": 1,
            "log_level": "info",
            "ping_interval": 5,
            "grace_period": 10,
            "heartbeat_port": 4444,
            "max_concurrent_health_checks": 10
        }
    ]
}